---
layout: default
title: (leetcode212)Word Search II
---

<h2>{{ page.title }}</h2>
<p>利用Trie树的实现</p>
{% highlight ruby %} 
public class Solution {
	class TrieNode {
	    // Initialize your data structure here.
		TrieNode[] next=new TrieNode[26];
		char node='#';
		Object val=null;
	    public TrieNode() {
	        
	    }
	    public TrieNode(char node)
	    {
	    	this.node=node;
	    }
	}
	
    private TrieNode root=new TrieNode();
    public void insert(String word) {
        insert(root,word,0);
    }
    
    private void insert(TrieNode root,String word,int d)
    {
    	if(d==word.length())
    	{
    		root.val="yes";  
    		return ;
    	}

    	if(root.next[word.charAt(d)-'a']==null)
    		root.next[word.charAt(d)-'a']=new TrieNode(word.charAt(d));
    	insert(root.next[word.charAt(d)-'a'],word,d+1);
    }
    
    public void addList(boolean[][] tag,char[][] board,int x,int y,StringBuilder sb,Set<String> list,TrieNode root)
    {
    	sb.append(board[x][y]);
    	if(root.val!=null)
    		list.add(sb.toString());
    	tag[x][y]=true;
    	if(x>0&&root.next[board[x-1][y]-'a']!=null&&!tag[x-1][y])
    	{
    		addList(tag,board,x-1,y,sb,list,root.next[board[x-1][y]-'a']);
    	}
    	if(y>0&&root.next[board[x][y-1]-'a']!=null&&!tag[x][y-1])
    	{
    		addList(tag,board,x,y-1,sb,list,root.next[board[x][y-1]-'a']);
    	}
    	if((x<board.length-1)&&root.next[board[x+1][y]-'a']!=null&&!tag[x+1][y])
    	{
    		addList(tag,board,x+1,y,sb,list,root.next[board[x+1][y]-'a']);
    	}
    	if((y<board[0].length-1)&&root.next[board[x][y+1]-'a']!=null&&!tag[x][y+1])
    	{
    		addList(tag,board,x,y+1,sb,list,root.next[board[x][y+1]-'a']);
    	}
    	
    	sb.deleteCharAt(sb.length()-1);
    	tag[x][y]=false;
    	
    }
    
    public List<String> findWords(char[][] board, String[] words) {
    	
    	Set<String> list=new HashSet<String>();
    	for(String val:words)
    		insert(val);
    	if(root.val!=null)
    		list.add("");
    	StringBuilder sb=new StringBuilder();    	
        boolean[][] tag=new boolean[board.length][board[0].length];
        for(int i=0;i<board.length;i++)
        	for(int j=0;j<board[0].length;j++)
        	{
        		if(root.next[board[i][j]-'a']!=null)
        			addList(tag,board,i,j,sb,list,root.next[board[i][j]-'a']);        			
        	}
        return new ArrayList<String>(list);
    }
}
 {% endhighlight %}
<p>{{ page.date | date_to_string }}</p>